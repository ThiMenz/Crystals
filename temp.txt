<!DOCTYPE html>
<html lang="de">

 <!-- HEADER -->
 
	<head>
	
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Möhrchens Website</title>
		
	</head>
  
  
 <!-- BODY -->
 
	<body>
		<h1>Möhrchens Website</h1>
		
		<div id="demo">
		<button type="button" onclick="loadXMLDoc()">Change Content</button>
		</div>
		
		<h3>Use Website as Guest</h3>
		<button type="submit">Continue as Guest</button>
		<br></br>
		<h3>or use your Password to Log In</h3>
		<label for="password">Password</label>
		<input id="inp_password", type="password"> 
		<button onclick="SubmitPassword()", type="submit">Log In</button>
		
		
		<!--<br>
		<label for="customwordlength">Length Of Custom Word</label>
		<input id="customwordlength">
		<button type="submit">Turn Engine On</button>-->
	</body>
	
	<script>
	
	
		// Log In Data
		const adminLogIns = [[5935135109685, "Thilo"]];
		
		// URLs
		const mainSide_admin = "Error.html";
		
		function loadXMLDoc() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				window.alert(this.responseText);
				if (this.readyState == 4 && this.status == 200) {
					window.alert("!");
				    document.getElementById("demo").innerHTML =
				    this.responseText;
				}
			};
			xhttp.open("GET", "loginhash.txt", true);
			xhttp.send();
		}
	
		function SubmitPassword() {
			let inpString = document.getElementById("inp_password").value;
			
			//Check Log In...
			if (IsInLogInList(adminLogIns, inpString)) { //for Admin
				window.location.replace(mainSide_admin);
			} else { // Failed!
				window.alert("This Log In is invalid :(");
			}
		}
		
		function IsInLogInList(list, password) {
			for (var i = 0; i < list.length; i++) {
				var curP = Hash64Bit(password + list[i][1]);
				if (curP == list[i][0]) return true;
			}
			return false;
		}
		
		function Hash64Bit(parStr) {
		  var i = parStr.length;
		  var hash1 = 5381;
		  var hash2 = 52711;

		  while (i--) {
			const ch = parStr.charCodeAt(i);
			hash1 = (hash1 * 33) ^ ch;
			hash2 = (hash2 * 33) ^ ch;
		  }

		  return (hash1 >>> 0) * 4096 + (hash2 >>> 0);
		}
		
		function TLM_HashFunction(parStr, parSalt) {
			if (parStr.length === 0) return 0;
			parStr += parSalt;
			var hashNum = 0;
			var tChar;
			for (var i = 0; i < parStr.length; i++) {
				hashNum = ((hashNum << 5) - hashNum) + parStr.charCodeAt(i);
				hashNum |= 0;
			}
			return hashNum;
		}
	
	</script>
  
</html>
